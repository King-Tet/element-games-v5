"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[651],{6088:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=void 0,t.boolean=function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return["true","t","yes","y","on","1"].includes(e.trim().toLowerCase());case"[object Number]":return 1===e.valueOf();case"[object Boolean]":return e.valueOf();default:return!1}}},6204:function(e,t,r){t.O7=void 0;let i=r(6088);Object.defineProperty(t,"O7",{enumerable:!0,get:function(){return i.boolean}}),r(446)},446:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isBooleanable=void 0,t.isBooleanable=function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return["true","t","yes","y","on","1","false","f","no","n","off","0"].includes(e.trim().toLowerCase());case"[object Number]":return[0,1].includes(e.valueOf());case"[object Boolean]":return!0;default:return!1}}},7820:function(e,t,r){let i;r.d(t,{te:function(){return Y},Ai:function(){return s},L0:function(){return u}});class s{withGatewayDomain(e){return this.gatewayDomain=e,this}withIframeDomain(e){return this.iframeDomain=e,this}withIframePrefix(e){return this.iframePrefix=e,this}withIframePath(e){return this.iframePath=e,this}withShowLoader(e){return this.showLoader=e,this}withImgLoaderUri(e){return this.imgLoaderUri=e,this}constructor(e,t){this.apiKey=e,this.appName=t,this.showLoader=!0,this.iframeDomain="",this.iframePrefix="/playgami-payments",this.iframePath="/v1/index.html"}}(d=u||(u={}))[d.INCOMPLETE=0]="INCOMPLETE",d[d.FAILED=1]="FAILED",d[d.PENDING_CONFIRMATION=2]="PENDING_CONFIRMATION",d[d.SUCCESSFUL=3]="SUCCESSFUL",(m=p||(p={})).WIDGET_READY="WIDGET_READY",m.WIDGET_IFRAME_INIT="WIDGET_IFRAME_INIT",m.WIDGET_IFRAME_ERROR="WIDGET_IFRAME_ERROR",m.WIDGET_INIT="WIDGET_INIT",m.WIDGET_OPEN="WIDGET_OPEN",m.WIDGET_CLOSE="WIDGET_CLOSE",m.WIDGET_BACK_TO_PORTAL_SUCCESS="WIDGET_BACK_TO_PORTAL_SUCCESS",m.WIDGET_BACK_TO_PORTAL_FAILED="WIDGET_BACK_TO_PORTAL_FAILED",m.WIDGET_BACK_TO_PORTAL_TIMEOUT="WIDGET_BACK_TO_PORTAL_TIMEOUT",m.WIDGET_READY_TO_USE="WIDGET_READY_TO_USE",m.WIDGET_LOADING="WIDGET_LOADING",m.WIDGET_ERROR="WIDGET_ERROR",m.WIDGET_INIT_ERROR="WIDGET_INIT_ERROR",m.WIDGET_SENT_PAYMENT="WIDGET_SENT_PAYMENT",m.WIDGET_SENT_PAYMENT_ERROR="WIDGET_SENT_PAYMENT_ERROR",m.WIDGET_COMPLETED_PAYMENT="WIDGET_PAYMENT_COMPLETED",m.WIDGET_PENDING_PAYMENT="WIDGET_PENDING_PAYMENT",m.WIDGET_VALIDATION_ERROR="WIDGET_VALIDATION_ERROR";for(var n,a,o,c,l,h,d,m,u,p,E,T,_,g,I,y,f,w=new Uint8Array(16),D=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,O=[],A=0;A<256;++A)O.push((A+256).toString(16).substr(1));var R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(O[e[t+0]]+O[e[t+1]]+O[e[t+2]]+O[e[t+3]]+"-"+O[e[t+4]]+O[e[t+5]]+"-"+O[e[t+6]]+O[e[t+7]]+"-"+O[e[t+8]]+O[e[t+9]]+"-"+O[e[t+10]]+O[e[t+11]]+O[e[t+12]]+O[e[t+13]]+O[e[t+14]]+O[e[t+15]]).toLowerCase();if(!("string"==typeof r&&D.test(r)))throw TypeError("Stringified UUID is invalid");return r},L=function(e,t,r){var i=(e=e||{}).random||(e.rng||function(){if(!E&&!(E="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return E(w)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=i[s];return t}return R(i)};(n=T||(T={})).PROCESS="process",n.BUTTON="button",(a=_||(_={}))[a.START_CHECKOUT=1]="START_CHECKOUT",(o=g||(g={})).CLICK="click",o.PROCESS_EXECUTION="process_execution";class C{constructor(e,t){this.trackEvent=async e=>{let t=(C.processOrder||0)+1;this.tracker.track("playgami.tracking",{tracking_id:this.trackingId,step_id:e.stepId,step_name:e.stepName,step_category:e.stepCategory,step_source:"client",product_name:"payments",process_name:"payment",process_order:e.processOrder||t,process_attributes:e.processAttributes,transaction_id:e.transactionId,interaction_type:e.interactionType,interaction_object:e.interactionObject,interaction_object_category:e.interactionObjectCategory}),await this.tracker.flush()},this.trackPaymentStarted=()=>this.trackEvent({stepId:"init_checkout_1",stepName:"init_checkout",stepCategory:"pre_checkout",processOrder:_.START_CHECKOUT,transactionId:void 0,processAttributes:"{}",interactionType:g.CLICK,interactionObject:"start_checkout_request_received",interactionObjectCategory:T.PROCESS}),this.trackWidgetClose=e=>this.trackEvent({stepId:"payment_method_selection_screen_1",stepName:"payment_method_selection_screen",stepCategory:"checkout",transactionId:e,processAttributes:"{}",interactionType:g.CLICK,interactionObject:"close_button_checkout",interactionObjectCategory:T.BUTTON}),this.trackBackToPortal=(e,t)=>{let r=t===p.WIDGET_BACK_TO_PORTAL_SUCCESS?"Successful":t===p.WIDGET_BACK_TO_PORTAL_FAILED?"Failed":"Timeout";return this.trackEvent({stepId:"payment_method_selection_screen_1",stepName:"payment_method_selection_screen",stepCategory:"checkout",transactionId:e,processAttributes:JSON.stringify({payment_status:r}),interactionType:g.CLICK,interactionObject:"back_to_portal_button_checkout",interactionObjectCategory:T.BUTTON})},this.tracker=e,this.trackingId=t}}C.processOrder=void 0;let P=(e,t)=>{var r;return e&&(i=new C(e,null!==(r=t.trackingId)&&void 0!==r?r:L())),i};var v=r(246);class N{static errored(e){let t=new N;return t.error=e,t}static cached(e){let t=new N;return t.registration=e,t.fromCache=!0,t.error=void 0,t}static registered(e){let t=new N;return t.registration=e,t.fromCache=!1,t.error=void 0,t}isSuccess(){return void 0===this.error}getRegistration(){if(!this.isSuccess()||!this.registration)throw Error("Registration not found due to not successful response from Titan");return this.registration}}class k{static from(e){if(e.token&&"string"==typeof e.token&&e.identificationSource&&"string"==typeof e.identificationSource)return new k(e.token,e.identificationSource);throw Error("could not parse registration DTO")}constructor(e,t){this.token=e,this.identificationSource=t}}(c=I||(I={}))[c.Debug=0]="Debug",c[c.Production=1]="Production",c[c.AdHoc=2]="AdHoc",(l=y||(y={}))[l.Game=0]="Game",l[l.DeviceProperty=1]="DeviceProperty",l[l.UnregisterDeviceProperty=2]="UnregisterDeviceProperty",l[l.ClearDeviceProperties=3]="ClearDeviceProperties",l[l.ABTest=4]="ABTest",l[l.Business=5]="Business",l[l.Advertisement=6]="Advertisement",l[l.Error=7]="Error",l[l.Custom=8]="Custom",l[l.Performance=9]="Performance",l[l.User=10]="User",(h=f||(f={}))[h.Low=0]="Low",h[h.Medium=1]="Medium",h[h.High=2]="High",r(2238);class b{withEventType(e){return this.eventType=e,this}withEvenTime(e){return this.time=e,this}constructor(e,t){this.time=new Date().valueOf(),this.name=e,this.properties=t,this.priority=f.High,this.eventType=y.Game}}class G{static inheritContext(e,t){if(t.isInherit())t.storage.set(G.STORAGE_KEY,e);else throw Error("Unable to inherit Context")}getProperties(){return this._properties}getInstall(){return this._properties[G.INSTALL_PROPERTY]}getTenant(){return this._properties[G.TENANT_PROPERTY]}getProperty(e){return this._properties[e]}setTenant(e){this.setProperty(G.TENANT_PROPERTY,e)}removeTenant(){this.removeProperty(G.TENANT_PROPERTY)}setProperty(e,t){if(e==G.INSTALL_PROPERTY)throw Error("Install can not be updated");this._properties[e]=t,this.copyToStorage()}removeProperty(e){if(e==G.INSTALL_PROPERTY)throw Error("Install can not be removed");delete this._properties[e],this.copyToStorage()}loadFromStorage(){let e=G.STORAGE_KEY;return this._storage.get(e)||{}}copyToStorage(){let e=G.STORAGE_KEY;this._storage.set(e,this._properties)}constructor(e){this._storage=e,this._properties=this.loadFromStorage(),this._properties[G.INSTALL_PROPERTY]||(this._properties[G.INSTALL_PROPERTY]=L(),this.copyToStorage())}}G.TENANT_PROPERTY="tenant",G.INSTALL_PROPERTY="install",G.STORAGE_KEY="ctx",r(4786);class S{trackEvent(e){this.events.push(e)}async register(e){return N.registered(new k("device token","none"))}getDeviceToken(){return"device token"}getApiKey(){return"api key"}getContext(){return this.context}stopAutoFlusher(){}resumeAutoFlusher(){}track(e,t){this.events.push(new b(e,t))}async flush(){this.flushed=!0}reset(){this.events=[],this.flushed=!1}exportSession(){return""}constructor(){this.events=[],this.appProperties={},this.flushed=!1,this.context=new G(new v.wd)}}class W{static createLoading(e,t){let r=window.document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.zIndex="99998",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.background="rgba(0, 0, 0, 0.6)",r.style.overflow="auto",r.setAttribute("id",W.CONTAINER_LOADING_ID);let i=window.document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.zIndex="99999",i.style.margin="auto",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center";let s=window.document.createElement("div"),n=window.document.createElement("div");if(e){let t=window.document.createElement("img");t.src=e,s.appendChild(t)}else n.innerHTML=this.spin,n.style.width="100%",n.animate([{transform:"rotate(0)"},{transform:"rotate(360deg)"}],{duration:2e3,iterations:1/0}),n.style.display="flex",n.style.justifyContent="center",s.appendChild(n);let a=window.document.createElement("p");a.textContent=t||W.defaultLoadingMessage,a.style.display="flex",a.style.alignItems="center",a.style.opacity="0.7",a.style.color="white",a.style.fontWeight="500",a.style.fontSize="16px",a.style.lineHeight="19px",a.style.marginTop="24px",s.appendChild(a),i.appendChild(s),i.setAttribute("id",W.LOADING_ID),r.appendChild(i),window.document.body.appendChild(r)}static setLoadingAndRenderBackground(e,t){let r=window.document.getElementById(W.CONTAINER_LOADING_ID);r?r.style.display="block":this.createLoading(e,t)}static setNotLoading(){let e=window.document.getElementById(W.LOADING_ID);e&&e.remove()}static removeLoaderAndBackground(){let e=window.document.getElementById(W.CONTAINER_LOADING_ID);e&&e.remove()}}W.CONTAINER_LOADING_ID="'container_loading'",W.LOADING_ID="'loading_img'",W.defaultLoadingMessage="Loading payment platform...",W.spin='<svg\n  width="80"\n  height="80"\n  viewBox="0 0 250 250"\n  color="#3f51b5"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n>\n  <defs>\n    <linearGradient id="spinner-secondHalf">\n      <stop offset="0%" stop-opacity="0" stop-color="white" />\n      <stop offset="50%" stop-opacity="0" stop-color="white" />\n      <stop offset="80%" stop-opacity="0.3" stop-color="white" />\n      <stop offset="100%" stop-opacity="0.3" stop-color="white" />\n    </linearGradient>\n        <linearGradient id="spinner-firstHalf">\n      <stop offset="0%" stop-opacity="0.6" stop-color="white" />\n      <stop offset="100%" stop-opacity="0.5" stop-color="white" />\n    </linearGradient>\n  </defs>\n\n  <g stroke-width="34" transform="matrix(1, 0, 0, 1, 25, 25)">\n    <path stroke="url(#spinner-secondHalf)" d="M 4 100 A 96 96 0 0 1 196 100" />\n    <path stroke="url(#spinner-firstHalf)" stroke-opacity="0.6" d="M 196 100 A 96 96 0 0 1 4 100" />\n  </g>\n\n</svg>';class M{init(e,t,r){let s=this.setIframeElementProperties();M.loadTimeout=window.setTimeout(()=>{var e;let t=M.WIDGET_LOADING_TIMEOUT/1e3;console.error("The iframe did not load within the expected time of ".concat(t," seconds. Check the URL ").concat(null===(e=this.iframeElement)||void 0===e?void 0:e.src)),W.removeLoaderAndBackground(),this.close(),this.config.callback(p.WIDGET_IFRAME_ERROR)},M.WIDGET_LOADING_TIMEOUT),this.startWidgetCallback=n=>{var a;this.widthBreakpoint=n.widthBreakpoint?n.widthBreakpoint:this.widthBreakpoint,this.mediaQueryList=this.browser.matchMedia("(max-width: ".concat(this.widthBreakpoint,")")),this.maxHeight=n.maxHeight,this.maxWidth=n.maxWidth,this.resize(this.mediaQueryList,this.iframeElement,this.maxHeight),this.resize(this.mediaQueryList,this.innerDiv,n.maxHeight),null===(a=s.contentWindow)||void 0===a||a.postMessage({type:"playgami-payment",...e,analyticsToken:null==i?void 0:i.tracker.exportSession(),product:{apiKey:t,name:r}},"*")},this.paymentContainerElement=this.createOrGetModalContainerElement();let n=this.setIframeContainerProperties();n.appendChild(s),this.paymentContainerElement.appendChild(n),this.browser.appendElementToBody(this.paymentContainerElement),this.paymentContainerElement.style.display="block"}close(){this.paymentContainerElement&&this.paymentContainerElement.remove()}resize(e,t,r){e&&e.matches?t.style.height=this.browser.getViewportHeight()+"px":t.style.height=r,t.style.maxWidth=this.maxWidth}setIframeElementProperties(){return this.iframeElement.className="payment-container-iframe",this.iframeElement.src=this.config.url,this.iframeElement.style.border="none",this.iframeElement.style.width="100%",this.iframeElement.onerror=e=>{var t;console.error("Error loading iframe:",e,null===(t=this.iframeElement)||void 0===t?void 0:t.src),clearTimeout(M.loadTimeout),this.close(),this.config.callback(p.WIDGET_IFRAME_ERROR)},this.resize(this.mediaQueryList,this.iframeElement,this.maxHeight),this.browser.addEventListener("resize",()=>this.resize(this.mediaQueryList,this.iframeElement,this.maxHeight),!1),this.iframeElement}static iframeListener(e){try{let t=e.data;if(t.channel===M.PAYMENT_GATEWAY_IFRAME_CHANNEL&&t.state){if(t.state===p.WIDGET_READY)for(let e of(clearTimeout(M.loadTimeout),W.setNotLoading(),M.callbackMap.keys())){let r=M.callbackMap.get(e);(null==r?void 0:r.startWidgetCallback)&&r.startWidgetCallback(t.iframeDimensions)}let e=t.paymentId;if(e){let r=M.callbackMap.get(e);if(!r){if(t.state===p.WIDGET_CLOSE&&M.callbackMap.size>0){let[e,r]=M.callbackMap.entries().next().value;r&&(r.config.callback(t.state),r.close(),r.unregisterCallback(e),W.removeLoaderAndBackground())}return}r.config.callback(t.state),[p.WIDGET_CLOSE,p.WIDGET_BACK_TO_PORTAL_SUCCESS,p.WIDGET_BACK_TO_PORTAL_FAILED,p.WIDGET_BACK_TO_PORTAL_TIMEOUT].includes(t.state)&&(r.close(),r.unregisterCallback(e),W.removeLoaderAndBackground())}}}catch(e){console.error(e)}}registerCallback(e){M.callbackMap.set(e,this)}unregisterCallback(e){M.callbackMap.delete(e)}createOrGetModalContainerElement(){if(this.browser.getHtmlElementById(M.WIDGET_CONTAINER_ID))return this.browser.getHtmlElementById(M.WIDGET_CONTAINER_ID);let e=this.browser.createElement("div");return e.style.width="100%",e.style.height="100%",e.style.zIndex="99999",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.overflow="auto",e.id=M.WIDGET_CONTAINER_ID,e}setIframeContainerProperties(){return this.innerDiv.style.opacity="100%",this.innerDiv.style.width="99%",this.innerDiv.style.maxWidth=this.maxWidth,this.innerDiv.style.margin="0 auto",this.innerDiv.style.marginTop="1%",this.innerDiv.style.background="rgb(255,255,255)",this.innerDiv.style.position="relative",this.innerDiv.style.borderRadius="6px",this.innerDiv.style.zIndex="999999",this.innerDiv.style.overflow="hidden",this.browser.addEventListener("resize",()=>{this.resize(this.mediaQueryList,this.innerDiv,this.UNSET)},!1),this.innerDiv}constructor(e,t,r){this.maxHeight="0px",this.maxWidth="0px",this.widthBreakpoint="756px",this.UNSET="unset",this.config=t,this.browser=r,this.browser.registerWindowMessageListener(M.iframeListener),this.registerCallback(e),this.iframeElement=r.createIframeElement(),this.innerDiv=r.createElement("div")}}M.PAYMENT_GATEWAY_IFRAME_CHANNEL="PAYMENT_GATEWAY_IFRAME_CHANNEL",M.WIDGET_CONTAINER_ID="widget-container",M.WIDGET_LOADING_TIMEOUT=3e4,M.callbackMap=new Map,M.loadTimeout=void 0;class U{createDOMHelper(e,t,r,i,s){return new M(r.paymentId,{url:this.createIframeUrl(e,t),callback:i},s)}createIframeUrl(e,t){return this.validatePurchaseRequest(t),this.getIframeUrl(e)}getIframeUrl(e){return new URL(this.getBaseUrl(e)).toString()}getBaseUrl(e){return"".concat(e.iframeDomain?e.iframeDomain:window.location.origin).concat(e.iframePrefix).concat(e.iframePath)}validatePurchaseRequest(e){if(!e.sku)throw Error("Purchase request incomplete, it must contain a valid SKU.")}}class x{init(){this.domHelper.init(this.paymentInfo,this.settings.apiKey,this.settings.appName)}constructor(e,t,r,i,s){this.settings=e,this.purchaseRequest=t,this.paymentInfo=r,this.domHelper=new U().createDOMHelper(this.settings,this.purchaseRequest,this.paymentInfo,i,s)}}class B{createElement(e){return window.document.createElement(e)}appendElementToBody(e){window.document.body.appendChild(e)}createIframeElement(){let e=window.document.createElement("iframe");return e.setAttribute("allowpaymentrequest",""),e}getHtmlElementById(e){return window.document.getElementById(e)}registerWindowMessageListener(e){window.paymentWindowEventListenerRegistered||(window.addEventListener(this.MESSAGE_TYPE,t=>{e(t);let r=t.data.processOrder;r&&(C.processOrder=r)}),window.paymentWindowEventListenerRegistered=!0)}matchMedia(e){return window.matchMedia(e)}getViewportHeight(){return Math.max(window.document.documentElement.clientHeight||0,window.innerHeight||0)}addEventListener(e,t,r){return window.addEventListener(e,t,r)}isOnIframe(){return window.self!==window.top}constructor(){this.MESSAGE_TYPE="message"}}class Y{async startPurchase(e){try{let t;if(Y.isWidgetOpen)return Promise.reject("There's an already ongoing payment process");this.validateDomain(),this.validatePurchaseRequest(e),this.startLoader(e.loadingMessage);let r=P(this.tracker,e);null==r||r.trackPaymentStarted(),Y.isWidgetOpen=!0;let i={sku:e.sku,userId:e.userId,deviceToken:this.tracker.getDeviceToken(),trackingId:null==r?void 0:r.trackingId,metadata:e.metadata,locale:e.locale};try{t=await this.gameDelegate.createCheckout(i)}catch(e){return Y.isWidgetOpen=!1,this.stopLoader(),Promise.reject("There was an error creating the checkout")}return this.showWidget(e,t,r)}catch(e){return console.error(e),this.stopLoader(),Promise.reject("There was an error starting the purchase")}}showWidget(e,t,r){let i={request:e,paymentInfo:t,status:u.INCOMPLETE};return new Promise(s=>{new x(this.settings,e,t,e=>{switch(e){case p.WIDGET_ERROR:case p.WIDGET_INIT_ERROR:i.status=u.FAILED;break;case p.WIDGET_IFRAME_ERROR:i.status=u.FAILED,Y.isWidgetOpen=!1,s(i);break;case p.WIDGET_CLOSE:Y.isWidgetOpen=!1,null==r||r.trackWidgetClose(t.paymentId),s(i);break;case p.WIDGET_BACK_TO_PORTAL_SUCCESS:Y.isWidgetOpen=!1,i.status=u.SUCCESSFUL,null==r||r.trackBackToPortal(t.paymentId,e),s(i);break;case p.WIDGET_BACK_TO_PORTAL_TIMEOUT:case p.WIDGET_BACK_TO_PORTAL_FAILED:Y.isWidgetOpen=!1,i.status=u.FAILED,null==r||r.trackBackToPortal(t.paymentId,e),s(i);break;case p.WIDGET_COMPLETED_PAYMENT:i.status=u.SUCCESSFUL,this.gameDelegate.claimPayment(t.paymentId);break;case p.WIDGET_PENDING_PAYMENT:i.status=u.PENDING_CONFIRMATION}},this.browser).init()})}async getItemPrices(e){let t=await fetch(this.getPaymentGatewayUrl(e),{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin"});return await t.json()}async resumePurchase(e,t){try{this.validateResumePurchase(e),this.startLoader();let r=await this.getPaymentData(e),i=P(this.tracker,r.request);return null==i||i.trackPaymentStarted(),this.settings.appName=r.name,t&&t(r),this.showWidget(r.request,r.paymentInfo,i)}catch(e){return console.error(e),this.stopLoader(),Promise.reject("There was an error resuming the purchase")}}async getPaymentData(e){let t=new Map;t.set("token",e);let r=await fetch(this.getPublicPaymentGatewayUrl("paymentdata",t),{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin"});if(!r.ok)throw Error("There was an error getting payment data from the purchase token.");return await r.json()}validateResumePurchase(e){if(!this.settings.apiKey)throw Error("The purchase cannot be resumed because the apikey is missing.");if(!e)throw Error("The purchase cannot be resumed because the token is missing.")}validatePurchaseRequest(e){if(!e.sku)throw Error("Purchase request incomplete, it must contain SKU");if(!e.userId)throw Error("Purchase request incomplete, it must contain userId")}startLoader(e){this.settings.showLoader&&W.setLoadingAndRenderBackground(this.imageLoaderUri,null!=e?e:this.DEFAULT_LOADING_MESSAGE)}stopLoader(){this.settings.showLoader&&W.removeLoaderAndBackground()}validateDomain(){if(this.browser.isOnIframe())throw Error("Purchase cannot proceed on an iframe")}getPaymentGatewayUrl(e){let t=new Map;return e&&t.set("country",e),this.getPublicPaymentGatewayUrl("items",t)}getPublicPaymentGatewayUrl(e,t){let r="playgami-payments/v1/apps/".concat(this.settings.apiKey,"/")+e,i=t?new URLSearchParams([...t]).toString():"";return new URL(i?r+"?"+i:r,this.settings.gatewayDomain||window.location.origin)}constructor(e,t,r){this.DEFAULT_LOADING_MESSAGE="Loading payment platform...",this.settings=e,this.gameDelegate=t,this.tracker=null!=r?r:new S,this.imageLoaderUri=e.imgLoaderUri,this.browser=new B}}}}]);